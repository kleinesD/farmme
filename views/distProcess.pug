extends base

block content

  section.main-section 

    .animal-results-window

      -if(!forEdit)

        .animal-results-container.animal-results-big#add-process-container(data-raw=`${engRaw}` data-unit=`${unitRaw}`)
          //-img.ar-image-back(src="/img/images/milk-icon.png")

          .ar-block-sub-title ДОБАВИТЬ
          .ar-block-title= `Переработка ${rusRaw}`

          .aa-input-block
            lable.aa-label(for="size") 
              p= `Переработано`
            .aa-double-input-block.aa-double-price-block
              input.aa-double-price-input#size(type="number" data-unit=`${unitRaw}`)
              p.aa-double-price-text= `${unitRaw === 'l' ? 'л.' : 'кг.'}`
          .aa-total-milk-box
            .aa-total-milk-line
              .aa-total-milk-line-inner(data-total=`${totalRaw}`)
            .aa-total-milk-text= `${totalRaw} ${unitRaw === 'l' ? 'л.' : 'кг.'}`
          .aa-input-united-block 
            .aa-input-block 
              label.aa-label(for="type")
                p Продукт
              .aa-select-box.aa-select-box-one
                .aa-select-text Выберите продукт
                ion-icon(name="chevron-down")
                .aa-select-options-box
                  .aa-select-option(data-val="cottage-cheese") Творог
                  .aa-select-option(data-val="butter") Масло 
                  .aa-select-option(data-val="cream") Сливки 
                  .aa-select-option(data-val="cheese") Сыр
                  .aa-select-option(data-val="whey") Сыворотка 
                  .aa-select-option(data-val="sour-cream") Сметана  
            .aa-input-block
              lable.aa-label(for="price") 
                p Вес | Объем
              .aa-double-input-block
                input.aa-double-input.size-input(type="number")
                select.aa-double-input.unit-input
                  option(value="l" selected) Л.
                  option(value="kg") Кг.  
          .aa-add-more-container
            .aa-add-more#add-product-input
              p Добавить продукт
              ion-icon.aa-add-more-icon(name="add")
          .aa-input-block
            label.aa-label(for="date")
              p Дата
            input.aa-text-input.aa-date-input#date(type="date")

          .aa-input-block
            lable.aa-label(for="note") 
              p Заметка
            textarea.aa-textarea-input#note(type="text")

          //-.aa-input-block
            lable.aa-label(for="price") 
              p Цена
            .aa-double-input-block.aa-double-price-block
              input.aa-double-price-input(type="number")
              p.aa-double-price-text / 1 Кг. 
            .aa-double-input-block.aa-double-price-block
              input.aa-double-price-input(type="number")
              p.aa-double-price-text / 256 Кг. 


          .ar-btn-box          
            a.ar-add-button(data-product-id=``) Сохранить

      -if(forEdit)
        .animal-results-container.animal-results-big#edit-process-container(data-raw=`${engRaw}` data-unit=`${rawProduct.unit}`)
          //-img.ar-image-back(src="/img/images/milk-icon.png")
          .ar-block-sub-title РЕДАКТИРОВАТЬ
          .ar-block-title= `Переработка ${rusRaw}`

          .aa-input-block
            lable.aa-label(for="size") 
              p= `Переработано`
            .aa-double-input-block.aa-double-price-block
              input.aa-double-price-input#size(type="number" data-unit=`${rawProduct.unit}` value=`${rawProduct.size}`)
              p.aa-double-price-text= `${rawProduct.unit === 'l' ? 'л.' : 'кг.'}`
          .aa-total-milk-box
            .aa-total-milk-line
              .aa-total-milk-line-inner(data-total=`${totalRaw + rawProduct.size}`)
            .aa-total-milk-text= `${totalRaw + rawProduct.size} ${rawProduct.unit === 'l' ? 'л.' : 'кг.'}`

          each product in products
            .aa-input-united-block.aa-input-united-block-valid(data-id=`${product._id}` data-new="false")
              .aa-input-block 
                label.aa-label(for="type")
                  p Продукт
                .aa-select-box.aa-select-box-one
                  .aa-select-text Выберите продукт
                  ion-icon(name="chevron-down")
                  .aa-select-options-box
                    .aa-select-option(class=`${product.product === 'cottage-cheese' ? 'aa-select-option-selected' : ''}`  data-val="cottage-cheese") Творог
                    .aa-select-option(class=`${product.product === 'butter' ? 'aa-select-option-selected' : ''}`  data-val="butter") Масло 
                    .aa-select-option(class=`${product.product === 'cream' ? 'aa-select-option-selected' : ''}`  data-val="cream") Сливки 
                    .aa-select-option(class=`${product.product === 'cheese' ? 'aa-select-option-selected' : ''}`  data-val="cheese") Сыр 
                    .aa-select-option(class=`${product.product === 'whey' ? 'aa-select-option-selected' : ''}`  data-val="whey") Сыворотка 
                    .aa-select-option(class=`${product.product === 'sour-cream' ? 'aa-select-option-selected' : ''}`  data-val="sour-cream") Сметана 
              .aa-input-block
                lable.aa-label(for="price") 
                  p Вес | Объем
                .aa-double-input-block
                  input.aa-double-input.size-input(type="number" value=`${product.size}`)
                  select.aa-double-input.unit-input
                    -if(product.unit === 'l')
                      option(value="l" selected hidden) Л.
                    -if(product.unit === 'kg')
                      option(value="kg" selected hidden) Кг.  
                    option(value="l") Л.
                    option(value="kg") Кг.  
              .aa-iu-remove   
                ion-icon(name="close")
          
          
          .aa-add-more-container
            .aa-add-more#add-product-input
              p Добавить продукт
              ion-icon.aa-add-more-icon(name="add")
          .aa-input-block
            label.aa-label(for="date")
              p Дата
            input.aa-text-input.aa-date-input#date(type="date" value=`${rawProduct.date.toLocaleString('ru-RU', {year: 'numeric'})}-${rawProduct.date.toLocaleString('ru-RU', {month: '2-digit'})}-${rawProduct.date.toLocaleString('ru-RU', {day: '2-digit'})}`)

          .aa-input-block
            lable.aa-label(for="note") 
              p Заметка
            textarea.aa-textarea-input#note(type="text")= `${rawProduct.note !== undefined ? rawProduct.note : ''}`

          .ar-btn-box          
            a.ar-add-button(data-product-id=`${rawProduct._id}`) Сохранить



